<% include ./partials/header.ejs %>
  <div class="w-full min-h-screen bg-[#2B2B2B] text-white py-5">
    <div class="w-full px-4 flex items-center justify-between">
      <img class="w-1/4" src="/images/logo.png" alt="">
      <div class="icons -mt-2 flex gap-5 items-center">
        <i class="text-[1.4rem] ri-heart-3-line"></i>
        <i class="text-[1.4rem] ri-messenger-line"></i>
      </div>
    </div>
    <div class="story px-3 flex gap-3 overflow-auto mt-5">
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover object-top"
              src="https://i.pinimg.com/736x/a3/1b/2e/a31b2ee2bdf3a8c5e65f99d935e64055.jpg"
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover object-top"
              src="https://i.pinimg.com/736x/82/6e/d6/826ed6bb894469f8f487166595cb0997.jpg"
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover object-top"
              src="https://i.pinimg.com/736x/3d/de/1b/3dde1bd0607d29c58315882ba0f9e76c.jpg"
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover object-top"
              src="https://i.pinimg.com/1200x/ff/aa/20/ffaa20a35216837005ef97dc1826e200.jpg"
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover object-top"
              src="https://i.pinimg.com/736x/83/15/57/83155795f417994e15a5defad7d72baa.jpg"
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover"
              src="https://media.istockphoto.com/id/1177400492/photo/portrait-of-a-young-indian-man-in-shirt-winter-season-in-india.jpg?s=612x612&w=0&k=20&c=vDSZfDPTBgukvMNUfeXhDyN9b9_ntJk9F6XnKEgwruc="
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover"
              src="https://media.istockphoto.com/id/1300972574/photo/millennial-male-team-leader-organize-virtual-workshop-with-employees-online.jpg?s=612x612&w=0&k=20&c=uP9rKidKETywVil0dbvg_vAKyv2wjXMwWJDNPHzc_Ug="
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover"
              src="https://media.istockphoto.com/id/1309328823/photo/headshot-portrait-of-smiling-male-employee-in-office.jpg?s=612x612&w=0&k=20&c=kPvoBm6qCYzQXMAn9JUtqLREXe9-PlZyMl9i-ibaVuY="
              alt="">
          </div>
        </div>
      </div>
      <div class="circle flex-shrink-0">
        <div
          class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
          <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
            <img class="w-full h-full object-cover"
              src="https://media.istockphoto.com/id/1338289824/photo/close-up-image-of-indian-man-with-buzz-cut-hairstyle-to-disguise-receding-hairline-wearing-t.jpg?s=612x612&w=0&k=20&c=YGf5cEYxFFnl3_ZaP0kwbJqTFk9IIOymvtQUgXHstTg="
              alt="">
          </div>
        </div>
      </div>
    </div>
    <div class="posts mb-20">
      <% if (posts.length > 0) { %> 
        <%  posts.reverse().forEach(post => { %>
              <div class="post mt-10 w-full min-h-[50vh]">
                <div class="title px-4 flex items-center gap-2">
                  <div class="w-[10vw] h-[10vw] bg-sky-100 gradient bg-gradient-to-r from-purple-700 to-orange-500 rounded-full flex justify-center items-center">
                    <div class="w-[92%] h-[92%] bg-sky-100 rounded-full overflow-hidden">
                      <img src="/images/uploads/<%= post.user.profileImage %>" alt="" class="w-full h-full rounded-full">
                    </div>
                  </div>
                  <h4 class="text-sm">
                    <%= post.user.username %>
                  </h4>
                  <h6 class="text-xs opacity-30"><%= formatDate(new Date(post.createdAt)) %></h6>
                </div>
                <div class="w-full h-96 mt-4 bg-sky-100 overflow-hidden">
                  <img src="/images/uploads/<%= post.postImage %>" alt="" class="w-full h-full rounded-full">
                </div>
                <div class="options w-full px-4 flex justify-between items-center text-[1.4rem]">
                  <div class="flex gap-3 mt-2">
                    <a href="/like/post/<%= post._id %>">
                      <i class="<%= post.likes.includes(user._id) ? 'ri-heart-3-fill text-red-500' : 'ri-heart-3-line' %>"></i>
                    </a>
                    <i class="ri-chat-3-line"></i>
                    <i class="ri-share-circle-line"></i>
                  </div>
                  <i class="ri-bookmark-line"></i>
                </div>
                <h3 class="px-4 mt-2 text-sm leading-none tracking-tight"><%= post.likes.length %> likes</h3>
                <h2 class="text-white font-light text-sm mt-2">
                  <span class="font-semibold pl-4 pr-1">
                    <%= post.user.username %>
                  </span>
                  <%= post.caption %>
                </h2>
              </div>
        <%  }) %>
      <% } else { %>
          <h3 class="text-zinc-300 text-xl mt-20 opacity-30 ml-5 font-semibold">No Posts yet ...</h3>
      <% } %>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function (event) {
      var scrollpos = localStorage.getItem('scrollpos');
      if (scrollpos) window.scrollTo(0, scrollpos);
    });

    window.onbeforeunload = function (e) {
      localStorage.setItem('scrollpos', window.scrollY);
    };
  </script>
  <% include ./partials/footer.ejs %>